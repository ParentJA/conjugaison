function Option(a,b){this._type=a||Option.Type.DISTRACTOR;this._text=b||null}Option.Type={KEY:"key",DISTRACTOR:"distractor"};var fn=Option.prototype;fn.get_type=function(){return this._type};fn.set_type=function(a){this._type=a};fn.get_text=function(){return this._text};fn.set_text=function(a){this._text=a};function Item(c,a,b,d){this._type=c||Item.Type.SELECTED_RESPONSE;this._instructions=a||null;this._stimulus=b||null;this._stem=d||null;this._response=null;this._correct=false;this._score=0;this._correct_response=null;this._num_options=0;this._options=[]}Item.Type={SELECTED_RESPONSE:"selected_response",CONSTRUCTED_RESPONSE:"constructed_response"};fn=Item.prototype;fn.get_type=function(){return this._type};fn.set_type=function(a){this._type=a};fn.get_instructions=function(){return this._instructions};fn.set_instructions=function(a){this._instructions=a};fn.get_stimulus=function(){return this._stimulus};fn.set_stimulus=function(a){this._stimulus=a};fn.get_stem=function(){return this._stem};fn.set_stem=function(a){this._stem=a};fn.get_response=function(){return this._response};fn.set_response=function(a){this._response=a};fn.is_correct=function(){return this._correct};fn.set_correct=function(a){this._correct=a};fn.get_score=function(){return this._score};fn.set_score=function(a){this._score=a};fn.get_correct_response=function(){if(this.is_empty()){return this._correct_response}var b=[];for(var a=0;a<this._num_options;a++){if(this._options[a].get_type()==Option.Type.KEY){b.push(a)}}return b};fn.set_correct_response=function(a){this._correct_response=a};fn.add_option=function(a){this._num_options++;this._options.push(a)};fn.remove_option=function(b){var a=this._options.indexOf(b);if(a!=-1){this._num_options--;this._options.splice(a,1)}};fn.option_at=function(a){return this._options[a]};fn.num_options=function(){return this._num_options};fn.is_empty=function(){return(this._num_options==0)};fn.is_complete=function(){return(this._response!=null)};fn.reset=function(){this._response=null;this._correct=false;this._score=0};function Assessment(a){this._name=a||null;this._current_item=null;this._current_item_index=-1;this._num_items=0;this._items=[]}Assessment.default_item={type:Item.Type.SELECTED_RESPONSE,instructions:"",stimulus:"",stem:"",response:"",correct:"",score:"",options:[]};Assessment.create_assessment=function(b){var a=new Assessment(b.name);$.each(b.items,function(d,c){var e=new Item(c.type,c.instructions,c.stimulus,c.stem);e.set_response(c.response);e.set_correct(c.correct);e.set_score(c.score);e.set_correct_response(c.correct_response);$.each(c.options,function(g,f){var h=new Option(f.type,f.text);e.add_option(h)});a.add_item(e)});return a};fn=Assessment.prototype;fn.get_name=function(){return this._name};fn.set_name=function(a){this._name=a};fn.num_correct=function(){var a=0;for(var b=0;b<this._num_items;b++){if(this._items[b].is_correct()){a++}}return a};fn.score=function(){var b=0;for(var a=0;a<this._num_items;a++){b+=this._items[a].get_score()}return b};fn.add_item=function(a){this._num_items++;this._items.push(a)};fn.remove_items=function(b){var a=this._items.indexOf(b);if(a!=-1){this._num_items--;this._items.splice(a,1)}};fn.item_at=function(a){var b=(a&&!isNaN(a))?this._items[a]:this._current_item;return b};fn.num_items=function(){return this._num_items};fn.is_empty=function(){return(this._num_items==0)};fn.is_complete=function(){for(var a=0;a<this._num_items;a++){if(!this._items[a].is_complete()){return false}}return true};fn.item_type=function(a){return this.item_at().get_type()};fn.item_instructions=function(a){return this.item_at().get_instructions()};fn.item_stimulus=function(a){return this.item_at().get_stimulus()};fn.item_stem=function(a){return this.item_at().get_stem()};fn.item_response=function(a){return this.item_at().get_response()};fn.item_is_correct=function(a){return this.item_at().is_correct()};fn.item_score=function(a){return this.item_at().get_score()};fn.item_correct_response=function(a){return this.item_at().get_correct_response()};fn.item_num_options=function(a){return this.item_at().num_options()};fn.item_is_empty=function(a){return this.item_at().is_empty()};fn.item_is_complete=function(a){return this.item_at().is_complete()};fn.option_type=function(c,a){var b=this.item_at(a);return b.option_at(c).get_type()};fn.option_text=function(c,a){var b=this.item_at(a);return b.option_at(c).get_text()};fn.current_item_index=function(){return this._current_item_index};fn.is_first_item=function(){return(this._current_item_index==0)};fn.is_last_item=function(){return(this._current_item_index==this._num_items-1)};fn.move_to_first_item=function(){return this.move_to_item_at(0)};fn.move_to_next_item=function(){if(this._current_item==null){return this.move_to_first_item()}if(!this.is_last_item()){this._current_item_index++;this._current_item=this._items[this._current_item_index];return true}else{return false}};fn.move_to_item_at=function(a){if(this._num_items<a+1){return false}this._current_item_index=a;this._current_item=this._items[this._current_item_index];return true};fn.evaluate=function(d,c){var f=(c&&!isNaN(c))?this._items[c]:this._current_item;var b=false;var a=f.get_correct_response();if(d.length==a.length){b=true;for(var e=0,g=d.length;e<g;e++){if(a.indexOf(d[e])==-1){b=false;break}}}if(b){f.set_response(d);f.set_correct(true);f.set_score(this.calculate_score())}else{f.set_response(d);f.set_correct(false);f.set_score(0)}return b};fn.calculate_score=function(){return 1};fn.reset=function(){for(var a=0;a<this._num_items;a++){this._items[a].reset()}this._current_item=null;this._current_item_index=0;this.move_to_first_item()};